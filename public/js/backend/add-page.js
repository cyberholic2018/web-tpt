!function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=277)}({1:function(e,t){e.exports=function(e,t,n,a,o){var i,r=e=e||{},s=typeof e.default;"object"!==s&&"function"!==s||(i=e,r=e.default);var c="function"==typeof r?r.options:r;t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns),a&&(c._scopeId=a);var l;if(o?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):n&&(l=n),l){var u=c.functional,d=u?c.render:c.beforeCreate;u?c.render=function(e,t){return l.call(t),d(e,t)}:c.beforeCreate=d?[].concat(d,l):[l]}return{esModule:i,exports:r,options:c}}},10:function(e,t){e.exports=function(e,t){for(var n=[],a={},o=0;o<t.length;o++){var i=t[o],r=i[0],s=i[1],c=i[2],l=i[3],u={id:e+":"+o,css:s,media:c,sourceMap:l};a[r]?a[r].parts.push(u):n.push(a[r]={id:r,parts:[u]})}return n}},11:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(new Date).getTime();t.default={name:"vue-ckeditor",props:{name:{type:String,default:function(){return"editor-"+ ++a}},value:{type:String},id:{type:String,default:function(){return"editor-"+a}},types:{type:String,default:function(){return"classic"}},config:{type:Object,default:function(){}}},data:function(){return{destroyed:!1}},computed:{instance:function(){return CKEDITOR.instances[this.id]}},watch:{value:function(e){this.instance&&this.update(e)}},mounted:function(){this.create()},beforeDestroy:function(){this.destroy()},methods:{create:function(){"undefined"==typeof CKEDITOR||("inline"===this.types?CKEDITOR.inline(this.id,this.config):CKEDITOR.replace(this.id,this.config),this.instance.setData(this.value),this.instance.on("change",this.onChange),this.instance.on("blur",this.onBlur),this.instance.on("focus",this.onFocus))},update:function(e){this.instance.getData()!==e&&this.instance.setData(e)},destroy:function(){this.destroyed||(this.instance.focusManager.blur(!0),this.instance.removeAllListeners(),this.instance.destroy(),this.destroyed=!0)},onChange:function(){var e=this.instance.getData();e!==this.value&&this.$emit("input",e)},onBlur:function(){this.$emit("blur",this.instance)},onFocus:function(){this.$emit("focus",this.instance)}}}},12:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ckeditor"},[n("textarea",{attrs:{name:e.name,id:e.id,types:e.types,config:e.config},domProps:{value:e.value}})])},staticRenderFns:[]}},277:function(e,t,n){e.exports=n(278)},278:function(e,t,n){Vue.component("add-page",n(279));new Vue({el:"#add-page"})},279:function(e,t,n){var a=n(1)(n(280),n(281),null,null,null);e.exports=a.exports},280:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=n.n(a);t.default={components:{Ckeditor:o.a},data:function(){return{isLoaded:!1,isEdit:!1,guid:$("#row-guid").val(),pageContent:{title:null,content:null,locale:"en",featureImage:null},ckConfig:{height:300,allowedContent:!0,filebrowserImageBrowseUrl:"/laravel-filemanager?type=Images",filebrowserImageUploadUrl:"/laravel-filemanager/upload?type=Images&_token="+$('meta[name="csrf-token"]').attr("content"),filebrowserBrowseUrl:"/laravel-filemanager?type=Files",filebrowserUploadUrl:"/laravel-filemanager/upload?type=Files&_token="+$('meta[name="csrf-token"]').attr("content")},token:$('meta[name="csrf-token"]').attr("content")}},created:function(){this.guid?(this.getPage(this.guid),this.isEdit=!0):this.isLoaded=!0},computed:{},methods:{savePage:function(){var e=this,t=this.token,n={title:this.pageContent.title,content:JSON.stringify({locale:this.pageContent.locale,content:this.pageContent.content}),featureImage:this.pageContent.featureImage};$.ajax({url:e.isEdit?"/admin/page/update/"+e.guid:"/admin/page/add",type:"POST",dataType:"json",data:n,beforeSend:function(e){e.setRequestHeader("X-CSRF-TOKEN",t)}}).done(function(){window.location="/cyberholic-system/page/list"}).fail(function(){}).always(function(){})},selectFeatureImg:function(){var e=this;window.open("/laravel-filemanager?type=Images","FileManager","width=900,height=600"),window.SetUrl=function(t,n){e.pageContent.featureImage=n}},getPage:function(e){var t=this;$.ajax({url:"/admin/page/get/"+e,type:"GET",dataType:"json"}).done(function(e){t.pageContent.title=e.title,t.pageContent.content=JSON.parse(e.content).content,t.pageContent.locale=JSON.parse(e.content).locale,t.pageContent.featureImage=e.featureImage,t.isLoaded=!0}).fail(function(){}).always(function(){})},deleteFeatureImg:function(){this.pageContent.featureImage=null},thumb:function(e){for(var t=e.split("/"),n=t[0],a=1;a<t.length-1;a++)n=n+"/"+t[a];return n=n+"/thumbs/"+t[t.length-1]},showMessage:function(e,t){toastr[e](t)}}}},281:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isLoaded?n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.pageContent.title,expression:"pageContent.title"}],staticClass:"form-control ch-product-title",attrs:{type:"text",name:"title",value:"",placeholder:"文章標題"},domProps:{value:e.pageContent.title},on:{input:function(t){t.target.composing||(e.pageContent.title=t.target.value)}}}),e._v(" "),n("ckeditor",{staticClass:"ch-product-description",attrs:{config:e.ckConfig},model:{value:e.pageContent.content,callback:function(t){e.pageContent.content=t},expression:"pageContent.content"}})],1),e._v(" "),n("div",{staticClass:"col-md-3"},[n("div",{staticClass:"panel panel-default"},[e._m(0),e._v(" "),n("div",{staticClass:"panel-body"},[null===e.pageContent.featureImage?n("a",{on:{click:function(t){e.selectFeatureImg()}}},[e._v("設定代表圖片")]):n("div",{},[n("img",{staticStyle:{width:"100%"},attrs:{src:e.pageContent.featureImage,id:"featurePreview"},on:{click:function(t){e.selectFeatureImg()}}}),e._v(" "),n("p",[e._v("點選圖片以編輯或更新")]),e._v(" "),n("a",{on:{click:function(t){e.deleteFeatureImg()}}},[e._v("刪除代表圖片")])])])]),e._v(" "),n("div",{staticClass:"panel panel-default"},[e._m(1),e._v(" "),n("div",{staticClass:"panel-body"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.pageContent.locale,expression:"pageContent.locale"}],staticClass:"form-control",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.pageContent.locale=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"en"}},[e._v("英文")]),e._v(" "),n("option",{attrs:{value:"zh-TW"}},[e._v("繁體中文")])])]),e._v(" "),n("div",{staticClass:"panel-footer"},[n("button",{staticClass:"btn btn-success",attrs:{type:"button",name:"button"},on:{click:e.savePage}},[e._v("儲存頁面")])])])])]):e._e()},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-heading"},[n("h3",{staticClass:"panel-title"},[e._v("\n\t\t\t\t\t代表圖片\n\t\t\t\t")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-heading"},[n("h3",{staticClass:"panel-title"},[e._v("\n\t\t\t\t\t設定語系\n\t\t\t\t")])])}]}},5:function(e,t){function n(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var i=a(o);return[n].concat(o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"})).concat([i]).join("\n")}return[n].join("\n")}function a(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var a=n(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(a[i]=!0)}for(o=0;o<e.length;o++){var r=e[o];"number"==typeof r[0]&&a[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),t.push(r))}},t}},6:function(e,t,n){function a(e){n(7)}var o=n(1)(n(11),n(12),a,null,null);e.exports=o.exports},7:function(e,t,n){var a=n(8);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(9)("6e4a9600",a,!0)},8:function(e,t,n){t=e.exports=n(5)(void 0),t.push([e.i,'.ckeditor:after{content:"";display:table;clear:both}',""])},9:function(e,t,n){function a(e){for(var t=0;t<e.length;t++){var n=e[t],a=u[n.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](n.parts[o]);for(;o<n.parts.length;o++)a.parts.push(i(n.parts[o]));a.parts.length>n.parts.length&&(a.parts.length=n.parts.length)}else{for(var r=[],o=0;o<n.parts.length;o++)r.push(i(n.parts[o]));u[n.id]={id:n.id,refs:1,parts:r}}}}function o(){var e=document.createElement("style");return e.type="text/css",d.appendChild(e),e}function i(e){var t,n,a=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(a){if(g)return v;a.parentNode.removeChild(a)}if(h){var i=p++;a=f||(f=o()),t=r.bind(null,a,i,!1),n=r.bind(null,a,i,!0)}else a=o(),t=s.bind(null,a),n=function(){a.parentNode.removeChild(a)};return t(e),function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap)return;t(e=a)}else n()}}function r(e,t,n,a){var o=n?"":a.css;if(e.styleSheet)e.styleSheet.cssText=m(t,o);else{var i=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(i,r[t]):e.appendChild(i)}}function s(e,t){var n=t.css,a=t.media,o=t.sourceMap;if(a&&e.setAttribute("media",a),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var c="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var l=n(10),u={},d=c&&(document.head||document.getElementsByTagName("head")[0]),f=null,p=0,g=!1,v=function(){},h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,n){g=n;var o=l(e,t);return a(o),function(t){for(var n=[],i=0;i<o.length;i++){var r=o[i],s=u[r.id];s.refs--,n.push(s)}t?(o=l(e,t),a(o)):o=[];for(var i=0;i<n.length;i++){var s=n[i];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete u[s.id]}}}};var m=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()}});